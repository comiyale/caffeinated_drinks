<!doctype html>
<html lang="zxx">


<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Coffee</title>
    <link rel="shortcut icon" href="assets/images/logo/favourite_icon.png">

    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/fontawesome.css">

    <link rel="stylesheet" type="text/css" href="assets/css/animate.css">

    <link rel="stylesheet" type="text/css" href="assets/css/slick.css">
    <link rel="stylesheet" type="text/css" href="assets/css/slick-theme.css">

    <link rel="stylesheet" type="text/css" href="assets/css/magnific-popup.css">

    <link rel="stylesheet" type="text/css" href="assets/css/jquery-ui.css">

    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head>


<body>

    <div class="body_wrap">

        <div class="backtotop">
            <a href="#" class="scroll">
                <i class="far fa-arrow-up"></i>
                <i class="far fa-arrow-up"></i>
            </a>
        </div>

        <div id="preloader"></div>


        <header class="header_section style_2">
            <div class="content_wrap">
                <div class="container maxw_1560">
                    <div class="row align-items-center">

                        <div class="col-lg-2 col-md-6 col-6">
                            <div class="brand_logo">
                                <a class="brand_link" href="index.html">
                                    <img style="border-radius: 15px; height: 100px" src="logo.jpeg" alt="logo_not_found">
                                </a>
                            </div>
                        </div>

                        <div class="col-lg-10 col-md-6 col-6">
                        </div>

                    </div>
                </div>
            </div>

            <div class="main_search_collapse collapse" id="main_search_collapse">
                <div class="main_search_form card">
                    <div class="container maxw_1560">
                        <form action="#">
                            <div class="form_item">
                                <input type="search" name="search" placeholder="Search here...">
                                <button type="submit" class="submit_btn"><i class="fal fa-search"></i></button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </header>

        <main>

            <div class="sidebar-menu-wrapper">
                <div class="cart_sidebar">
                    <button type="button" class="close_btn"><i class="fal fa-times"></i></button>
                    <h2 class="heading_title text-uppercase">Cart Items - <span>4</span></h2>

                    <div class="cart_items_list">
                        <div class="cart_item">
                            <div class="item_image">
                                <img src="assets/images/recent_post/img_03.jpg" alt="image_not_found">
                            </div>
                            <div class="item_content">
                                <h4 class="item_title">
                                    Rorem ipsum dolor sit amet, sectetur adipisi cingey.
                                </h4>
                                <span class="item_price">$19.00</span>
                                <button type="button" class="remove_btn"><i class="fal fa-times"></i></button>
                            </div>
                        </div>

                        <div class="cart_item">
                            <div class="item_image">
                                <img src="assets/images/recent_post/img_04.jpg" alt="image_not_found">
                            </div>
                            <div class="item_content">
                                <h4 class="item_title">
                                    Rorem ipsum dolor sit amet, sectetur adipisi cingey.
                                </h4>
                                <span class="item_price">$19.00</span>
                                <button type="button" class="remove_btn"><i class="fal fa-times"></i></button>
                            </div>
                        </div>

                        <div class="cart_item">
                            <div class="item_image">
                                <img src="assets/images/recent_post/img_05.jpg" alt="image_not_found">
                            </div>
                            <div class="item_content">
                                <h4 class="item_title">
                                    Rorem ipsum dolor sit amet, sectetur adipisi cingey.
                                </h4>
                                <span class="item_price">$19.00</span>
                                <button type="button" class="remove_btn"><i class="fal fa-times"></i></button>
                            </div>
                        </div>

                        <div class="cart_item">
                            <div class="item_image">
                                <img src="assets/images/recent_post/img_06.jpg" alt="image_not_found">
                            </div>
                            <div class="item_content">
                                <h4 class="item_title">
                                    Rorem ipsum dolor sit amet, sectetur adipisi cingey.
                                </h4>
                                <span class="item_price">$19.00</span>
                                <button type="button" class="remove_btn"><i class="fal fa-times"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="total_price text-uppercase">
                        <span>Sub Total:</span>
                        <span>$76.00</span>
                    </div>
                    <ul class="btns_group ul_li">
                        <li><a href="cart.html" class="btn btn_primary text-uppercase">View Cart</a></li>
                        <li><a href="checkout.html" class="btn btn_border border_black text-uppercase">Checkout</a></li>
                    </ul>
                </div>
                <div class="cart_sidebar_overlay"></div>
            </div>
            <!-- cart_sidebar - end
        ================================================== -->

            <!-- breadcrumb_section - start
				================================================== -->
            <section class="breadcrumb_section text-uppercase" style="background-image: url(assets/images/breadcrumb/breadcrumb_bg_01.jpg);">
                <div class="container">
                    <h1 class="page_title text-white wow fadeInUp" data-wow-delay=".1s">Shop Details</h1>
                    <ul class="breadcrumb_nav ul_li wow fadeInUp" data-wow-delay=".2s">
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li>Coffee Details</li>
                    </ul>
                </div>
                <div class="breadcrumb_icon_wrap">
                    <div class="container">
                        <div class="breadcrumb_icon wow fadeInUp" data-wow-delay=".3s">
                            <img src="assets/images/feature/icon_01.png" alt="icon_not_found">
                            <span class="bg_shape"></span>
                        </div>
                    </div>
                </div>
            </section>
            <!-- breadcrumb_section - end
				================================================== -->

            <!-- details_section - start
        ================================================== -->
            <section class="details_section shop_details sec_ptb_120 bg_default_gray">
                <div class="container">

                    <div class="row justify-content-lg-between justify-content-md-center justify-content-sm-center">
                        <div class="col-lg-6 col-md-7">
                            <div class="details_image_wrap wow fadeInUp" data-wow-delay=".1s">
                                <div class="details_image_carousel">
                                    <div class="slider_item">
                                        <img id="coffee_main_img" src="assets/images/shop/img_01.png" alt="image_not_found">
                                    </div>

                                </div>


                            </div>
                        </div>

                        <div class="col-lg-6 col-md-7">
                            <div class="details_content wow fadeInUp" data-wow-delay=".2s">
                                <div class="details_flex_title">
                                    <h2 class="details_title text-uppercase" id="coffee_title"></h2>
                                    <div class="details_review">
                                        <ul class="rating_star ul_li">
                                            <li><i class="fas fa-star"></i></li>
                                            <li><i class="fas fa-star"></i></li>
                                            <li><i class="fas fa-star"></i></li>
                                            <li><i class="fas fa-star"></i></li>
                                            <li><i class="far fa-star"></i></li>
                                        </ul>
                                        <span class="review_text">04 - Customer Review</span>
                                    </div>
                                </div>
                                <p id="coffee_description">
                                    The coffee is brewed by first roasting the green coffee beans over hot coals in brazier.Once the beans are roasted each participant is given an opportunity to sample The coffee is brewed by first roasting the green coffee beans over hot coals in a brazier.
                                </p>
                                <div class="details_price">
                                    <strong class="price_text" id="coffee_caffeine_quantity"></strong>
                                </div>
                                <ul class="details_item_color ul_li">
                                    <li class="bg_brown"><input type="radio" name="item_color"></li>
                                    <li class="bg_browndark"><input type="radio" name="item_color" checked></li>
                                    <li class="bg_brownlight"><input type="radio" name="item_color"></li>
                                </ul>
                                <ul class="btns_group ul_li">
                                    <li>
                                        <div class="quantity_input quantity_boxed">
                                            <h4 class="quantity_title text-uppercase">Quantity</h4>
                                            <form action="file:///home/green/Desktop/MJ-Freeway-Skills-Assessment/item.html" method="get">
                                                <!-- <button type="button" class="input_number_decrement">–</button> -->
                                                <input required type="number" name="quantity" value="2">
                                                <input id="item_id" type="hidden" name="id" value="">
                                                <!-- <button type="button" class="input_number_increment">+</button> -->
                                                <button style="margin-left: 20px" type="submit" class="btn btn_secondary text-uppercase">Buy</button>
                                            </form>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>


                    <div class="related_products">
                        <h4 class="area_title text-uppercase mb-0 wow fadeInUp" data-wow-delay=".1s">Related Product</h4>
                        <div class="row" id="coffeMenu">
                            <!--get coffee menu-->
                        </div>
                    </div>

                </div>
            </section>
            <!-- details_section - end
        ================================================== -->

        </main>
        <!-- main body - end
			================================================== -->

        <footer class="footer_section text-white deco_wrap" style="background-image: url(assets/images/backgrounds/bg_08.png);">
            <div class="footer_widget_area">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-5 col-md-6 col-sm-7">
                            <div class="footer_subscribe_form text-center">
                                <h2 class="form_title text-uppercase wow fadeInUp" data-wow-delay=".1s">Coffee Build your Fresh mind</h2>
                                <form action="#">
                                    <div class="form_item wow fadeInUp" data-wow-delay=".2s">
                                        <input type="email" name="email" placeholder="Enter your email">
                                        <button class="btn btn_primary text-uppercase" type="submit">Subscribe Now</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="footer_bottom text-center">
                    <p class="copyright_text mb-0 wow fadeInUp" data-wow-delay=".1s">Copyright@ 2021 Developed by <a class="btn_text" href="mailto:char.omiyale@outlook.com"><span>Charles Omiyale</span></a></p>
                </div>
            </div>

            <div class="scratch scratch_top">
                <img src="assets/images/decorations/scratch_02.png" alt="image_not_found">
            </div>
        </footer>

    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <script src="assets/js/wow.min.js"></script>

    <script src="assets/js/slick.min.js"></script>

    <script src="assets/js/magnific-popup.min.js"></script>

    <script src="assets/js/isotope.pkgd.min.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk2HrmqE4sWSei0XdKGbOMOHN3Mm2Bf-M&amp;ver=2.1.6"></script>
    <script src="assets/js/gmaps.min.js"></script>

    <script src="assets/js/jquery-ui.js"></script>

    <script src="assets/js/mCustomScrollbar.js"></script>

    <script src="assets/js/main.js"></script>

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        const currentID = urlParams.get('id');

        let coffeMenu;
        let coffeeData;
        let coffeeBuyData;
        let coffeeObj;
        let coffeeBuyStatus;
        let coffeMenuNode = document.getElementById("coffeMenu");
        let coffee_description_node = document.getElementById("coffee_description");
        let coffee_title_node = document.getElementById("coffee_title");
        let coffee_caffeine_quantity_node = document.getElementById("coffee_caffeine_quantity");
        let coffee_main_img_node = document.getElementById("coffee_main_img");
        let item_id_node = document.getElementById("item_id");


        const buyCoffee = (id, quantity) => {
            axios.get(`${API_DOMAIN}${consumeItem_url}/${id}/${quantity}`)
                .then(response => {
                    coffeeBuyData = response.data.data;
                    coffeeBuyStatus = response.data.status;

                    if (coffeeBuyStatus && coffeeBuyData.canConsume >= quantity) {
                        swal({
                            title: `Thanks for buying ${coffeeBuyData.itemObj.name}`,
                            text: `You purchased ${coffeeBuyData.quantity} and can still consume an extra ${coffeeBuyData.extra}`,
                            icon: "success",
                            button: `Yes!!!`,
                        });
                    } else {
                        swal({
                            title: `Sorry can't purchase ${coffeeBuyData.itemObj.name} (${quantity})`,
                            text: `Above safe zone of ${coffeeBuyData.safeCaffeineLevel}${coffeeBuyData.unit}`,
                            icon: "warning",
                            button: `Ok`,
                        });
                    }
                })
                .catch(error => console.error(error));
        };

        const getCoffeeMenuCall = () => {
            axios.get(`${API_DOMAIN}${getMenu_url}`)
                .then(response => {
                    coffeMenu = response.data.data;
                    if (coffeMenu !== "") {
                        for (let item of coffeMenu) {

                            if (item.id != currentID) {
                                coffeMenuNode.innerHTML +=
                                    `
                            <div class="col-lg-4 col-md-6 col-sm-6">
                                    <div class="shop_card wow fadeInUp" data-wow-delay=".1s">
                                        <a class="wishlist_btn" href="#!"><i class="fal fa-heart"></i></a>
                                        <a class="item_image" href="item.html?id=${item.id}">
                                            <img src="${item.image}" alt="${item.name}">
                                        </a>
                                        <div class="item_content">
                                            <h3 class="item_title text-uppercase">
                                                <a href="item.html?id=${item.id}">${item.name}</a>
                                            </h3>
                                            <div class="btns_group">
                                                <span class="item_price bg_default_brown">${item.caffeine_quantity}${item.caffeine_quantity_unit}</span>
                                                <a class="btn btn_border border_black text-uppercase" href="item.html?id=${item.id}">View</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                            }

                        }
                    }
                })
                .catch(error => console.error(error));
        };
        getCoffeeMenuCall();

        const getCoffeeDataCall = (id) => {
            axios.get(`${API_DOMAIN}${getCoffee_url}${id}`)
                .then(response => {
                    coffeeData = response.data.data;
                    coffeeStatus = response.data.status;
                    console.log(coffeeData);
                    if (coffeeStatus) {
                        coffee_description_node.innerHTML = `${coffeeData.description}`;
                        coffee_title_node.innerHTML = `${coffeeData.name}`;
                        coffee_caffeine_quantity_node.innerHTML = `${coffeeData.caffeine_quantity}${coffeeData.caffeine_quantity_unit}`;
                        coffee_main_img_node.src = `${coffeeData.image}`;
                        item_id_node.value = coffeeData.id;
                    }
                })
                .catch(error => console.error(error));
        };
        getCoffeeDataCall(currentID);

        try {
            const iWant = urlParams.get('quantity');

            if (!isNaN(iWant)) {
                buyCoffee(currentID, iWant);
            }
        } catch (e) {
            console.log("no quantity param");
        }
    </script>

</body>

</html>